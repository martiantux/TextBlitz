import{S as s}from"../../chunks/storage.js";class r{constructor(){this.initialize()}async initialize(){await s.initialize(),await this.loadStatus(),this.setupEventListeners()}async loadStatus(){const t=await s.getSettings(),n=await s.getSnippets(),a=Object.values(n),c=document.getElementById("status"),i=document.getElementById("status-text"),o=document.getElementById("stats");t.enabled?(c?.classList.remove("disabled"),i&&(i.textContent="✓ TextBlitz is active")):(c?.classList.add("disabled"),i&&(i.textContent="✗ TextBlitz is disabled")),o&&(o.textContent=`${a.length} snippet${a.length!==1?"s":""} configured`);const l=document.getElementById("recent-list");if(l){const d=a.filter(e=>e.lastUsed).sort((e,p)=>(p.lastUsed||0)-(e.lastUsed||0)).slice(0,5);d.length===0?l.innerHTML='<div class="empty">No snippets used yet</div>':l.innerHTML=d.map(e=>`
          <div class="recent-item">
            <span class="trigger">${this.escapeHtml(e.trigger)}</span>
            <span class="expansion">→ ${this.escapeHtml(e.expansion.substring(0,30))}${e.expansion.length>30?"...":""}</span>
          </div>
        `).join("")}}setupEventListeners(){document.getElementById("open-options")?.addEventListener("click",()=>{chrome.runtime.openOptionsPage()}),document.getElementById("toggle-enabled")?.addEventListener("click",async()=>{const t=await s.getSettings();t.enabled=!t.enabled,await s.saveSettings(t),await this.loadStatus()})}escapeHtml(t){const n=document.createElement("div");return n.textContent=t,n.innerHTML}}new r;
