import{C as f,a as l}from"../chunks/case-transform.js";console.log("TextBlitz: Offscreen document initialized");chrome.runtime.onMessage.addListener((r,o,n)=>{if(r.type==="PROCESS_SNIPPET")return m(r).then(s=>n({success:!0,...s})).catch(s=>n({success:!1,error:s.message})),!0});async function m(r){const{expansion:o,trigger:n,caseTransform:s}=r;let e=await f.processCommands(o);s&&s!=="none"&&(e=l.transform(e,s,n));const c="{cursor}",t=e.indexOf(c);let a=e.length;t!==-1&&(e=e.slice(0,t)+e.slice(t+c.length),a=t);const{chunks:i,actions:u}=f.splitTextByKeyboardActions(e);return{text:i.join(""),cursorOffset:a,chunks:i,actions:u}}
